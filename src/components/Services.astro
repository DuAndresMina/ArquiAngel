---
import { onMount } from "solid-js";

const services = [
  {
    title: 'Servicio Básico',
    features: [
      'Servicio de mejoras',
      'Mesón en cuarzo o granito',
      'Muebles y barra de cocina en madera RH',
      'Cambio de combo sanitario',
      'Griferías y accesorios básicos',
      'Pisos en cerámica',
      'Paredes de baño y cocina en cerámica',
      'Paredes en estuco y pintura',
      'Cielos estucados y pintados',
    ],
    description: 'Perfecto para actualizaciones básicas generales del hogar y pequeñas mejoras.',
    slug: 'servicio-basico'
  },
  {
    title: 'Servicio Plus',
    features: [
      'Servicio de mejoras',
      'Mesón en cuarzo o granito',
      'Muebles y barra de cocina en madera RH colores plus',
      'Cambio de combo sanitario',
      'Griferías y accesorios gama media',
      'Pisos en cerámica, laminado o porcelanato',
      'Paredes de baño y cocina en cerámica o porcelanato',
      'Paredes en estuco y pintura',
      'Cielos en drywall',
      'Puertas y armarios en madera RH color plus',
    ],
    description: 'Perfecto para actualizaciones con acabados más personalizados del hogar y pequeñas mejoras.',
    slug: 'servicio-plus'
  },
  {
    title: 'Servicio Premium',
    features: [
      'Rediseño completo del espacio',
      'Materiales de alta gama',
      'Diseño de interiores profesional',
      'Renovación a gran escala con materiales de primera calidad y diseño experto',
      'Servicio de mejoras',
      'Mesón en cuarzo o granito',
      'Muebles y barra de cocina en madera RH colores de alta gama',
      'Herrajes de cierre lento y accesorios de alta gama',
      'Cambio de combo sanitario',
      'Griferías y accesorios gama alta',
      'Pisos en cerámica, SPC o porcelanato',
      'Paredes de baño y cocina en cerámica o porcelanato',
      'Paredes en estuco y pintura',
      'Cielos en drywall',
      'Luces decorativas',
      'Puertas y armarios en madera RH colores de alta gama',
    ],
    description: 'Renovación a gran escala con materiales premium y diseño experto.',
    slug: 'servicio-premium'
  },
];

onMount(() => {
  const cards = document.querySelectorAll(".service-card");
  cards.forEach((card) => {
    card.addEventListener("mouseenter", () => {
      card.classList.add("scale-105", "shadow-xl");
    });
    card.addEventListener("mouseleave", () => {
      card.classList.remove("scale-105", "shadow-xl");
    });
  });
});
---

<section id="servicios" class="py-10 relative overflow-hidden">
  <div class="container mx-auto px-4 text-center">
    <h2 class="text-3xl font-semibold text-gray-800 mb-2 animate-float">Nuestros Servicios</h2>
    <p class="text-gray-600 max-w-xl mx-auto mb-10 text-sm animate-fade-in">
      Elige el paquete de remodelación que necesitas
    </p>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {services.map((service, index) => (
        <div 
          class="service-card bg-white p-3 rounded-xl shadow-md transition-all duration-300 hover:shadow-lg relative overflow-hidden"
          data-aos="zoom-in-up"
          data-aos-delay={index * 100}
        >
          <!-- Efecto de borde animado -->
          <div class="absolute inset-0 rounded-xl border-2 border-primary/10 animate-border-pulse"></div>
          
          <h3 class="text-md font-semibold text-gray-800 mb-3 transform hover:scale-105 transition-all">
            {service.title}
          </h3>
          
          <p class="text-xs text-gray-600 mb-4 min-h-[50px]">{service.description}</p>
          
          <ul class="text-left mb-4 space-y-2">
            {service.features.map((feature, idx) => (
              <li 
                class="text-xs flex items-center opacity-0 animate-fade-stagger"
                style={`--stagger-delay: ${idx * 50}ms`}
              >
                <svg 
                  class="w-4 h-4 text-green-500 mr-2 animate-icon-bounce"
                  fill="currentColor" 
                  viewBox="0 0 20 20"
                >
                  <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" />
                </svg>
                {feature}
              </li>
            ))}
          </ul>

          <div class="flex flex-col gap-3 mt-auto">
            <a 
              href="/contact" 
              class="cta-button relative overflow-hidden group text-sm"
            >
              <span class="absolute inset-0 bg-primary transform -skew-x-12 -translate-x-full group-hover:translate-x-0 transition-all duration-300"></span>
              <span class="relative z-10 flex items-center justify-center gap-2 text-white px-4 py-2 font-semibold">
                <span class="group-hover:-translate-y-1 transition-transform">Iniciemos</span>
                <svg class="w-4 h-4 animate-bounce-horizontal" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                </svg>
              </span>
            </a>

            <a 
              href={`/services/${service.slug}`} 
              class="learn-more relative overflow-hidden group text-sm"
            >
              <div class="absolute inset-0 bg-secondary/10 group-hover:bg-secondary transition-colors duration-200"></div>
              <span class="relative z-10 flex items-center justify-center gap-2 text-secondary group-hover:text-white px-4 py-2 font-semibold">
                <span>Leer más</span>
                <svg class="w-4 h-4 transition-transform group-hover:translate-x-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                </svg>
              </span>
            </a>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  /* Ajustes de animaciones y estilos */
  @keyframes border-pulse {
    0% { opacity: 0.3; transform: scale(0.95); }
    50% { opacity: 1; transform: scale(1); }
    100% { opacity: 0.3; transform: scale(0.95); }
  }

  @keyframes fade-stagger {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes icon-bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
  }

  @keyframes bounce-horizontal {
    0%, 100% { transform: translateX(0); }
    50% { transform: translateX(3px); }
  }

  .animate-border-pulse {
    animation: border-pulse 2.5s ease-in-out infinite;
  }

  .animate-fade-stagger {
    animation: fade-stagger 0.4s ease forwards;
  }

  .animate-icon-bounce {
    animation: icon-bounce 0.8s ease infinite;
  }

  .animate-bounce-horizontal {
    animation: bounce-horizontal 0.8s ease infinite;
  }

  .service-card {
    transform-style: preserve-3d;
    perspective: 800px;
  }

  .service-card:hover {
    transform: 
      translateY(-5px)
      rotateX(1deg)
      rotateY(1deg);
  }

  .cta-button span {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .learn-more svg {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>